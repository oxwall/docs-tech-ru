.. _language-label:

Файлы переводов
===============


Зачастую в плагинах необходимо использовать переводы на различные языки некоторых видов контента сайта: ссылки, пункты меню, итд.
Для этого можно воспользоваться системой переводов **oxwall**.

Регистрация префикса языка
--------------------------

Перед началом разработки плагина нужно зарегистрировать новый префикс языка плагина (префикс это просто категория переводов), для того,
чтобы в последующем можно было добавлять новые переводы используя этот префикс. Для регистрации префикса нужно
добавить запись в таблицу **ow_base_language_prefix**

#. prefix: **mysuperplugin**
#. label: **My Super Plugin**

В качестве префикса языка принято использовать ключ плагина.

Добавление переводов
--------------------

Для того, чтобы добавить переводы нужно перейти в админ панель на страницу управления языками **(your_site.com/admin/settings/dev-tools/languages)**.
На этой странице найти и нажать кнопку  **"Add new text"**, в всплывающем окне нужно выбрать ранее созданный нами префикс
**"My Super Plugin"** и добавить необходимый ключ (ключ это указание на значение языка) и значения переводов.

Экспортирование переводов
-------------------------

После того, как все работы с плагином закончены нужно сделать экспорт переводов и подключить полученный файл в плагин. Для этого на странице
**your_site.com/admin/settings/dev-tools/languages/mod** нужно нажать на кнопку **"Export"** и выбрать ранее созданный префикс
**"My Super Plugin"**. Полученный в итоге zip архив нужно скопировать в корень плагина.

Подключение переводов
---------------------

Для того, чтобы подключить сгенерированный zip файл с переводами его нужно подключить  в инсталляционный файл плагина (:ref:`plugin-structure-label`),
пример как это можно сделать:

.. code-block:: php

    <?php

        // import langs
        OW::getLanguage()->importPluginLangs(OW::getPluginManager()->getPlugin('mysuperplugin')->getRootDir() . 'langs.zip', 'mysuperplugin');